2003-02-12  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/25dotfiles: Remove minitheme.

2003-02-11  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/25dotfiles: Use stock "yes" and "no" buttons.

	* X11/Xdefaults: New file.
	* Makefile (install-scripts): Ship it.

2003-02-11  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.38 released.

2003-02-11  Philip Blundell  <pb@nexus.co.uk>

	* X11/gpe-login.gtkrc (gtk-font-name): Set to Sans 8.

	* gpe-login.c (main): Use stock button.  Don't call gpe_load_icons.
	(my_icons): Remove.

2003-02-05  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.35 released.

2003-02-05  Philip Blundell  <philb@gnu.org>

	* X11/xsettings.default (Gtk/FontName): Set to Sans 8.

2003-02-02  Philip Blundell  <philb@gnu.org>

	* Makefile (install-scripts): Install .desktop for gpe-logout
	also.

	* X11/Xsession-gpe.d/25dotfiles: Add minitime.  Replace miniapm
	with minibat.

2003-01-25  Philip Blundell  <philb@gnu.org>

	* gpe-dm 0.20 released.
	* gpe-session-scripts 0.34 released.
	* gpe-login 0.37 released.
	
2003-01-25  Philip Blundell  <philb@gnu.org>

	* gpe-login.xinit: Break up exec line to work around busybox bug 547.

	* familiar/gpe-logout.png: Move to ...
	* gpe-logout.png: ... here.
	* Makefile (ipkg): Don't install gpe-logout.png here.
	(install-scripts): Install it here.

	* familiar/gpe-logout.menu: Deleted.
	* Makefile (ipkg): Don't install it.
	* gpe-logout.desktop: New file.
	
	* gpe-login.c (main): Set cursor for window.

	* X11/Xserver (ARGS): Add -br.

2003-01-18  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.36 released.

2003-01-04  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.33 released.
	
2003-01-06  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/99xWindowManager: Add exec.
	* gpe-login.xinit: Likewise.

2003-01-04  Philip Blundell  <philb@gnu.org>

	* gpe-login.setup: Revert change of 2002-12-17.

2003-01-04  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.32 released.
	
2003-01-04  Philip Blundell  <philb@gnu.org>

	* X11/xsettings.default: New file.
	* Makefile (install-scripts): Install it.

2003-01-04  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.35 released.

2003-01-04  Philip Blundell  <philb@gnu.org>

	* gpe-logout.c (main): Add GtkHSeparator above buttons.  Pack them
	into box with fill=FALSE.
	
2003-01-04  Philip Blundell  <philb@gnu.org>

	* gpe-logout.c (on_window_destroy, on_cancel_button_clicked):
	Delete.
	(main): Use gtk_main_quit in place of above functions.  Use plain
	GtkWindow in place of GtkDialog.  Don't attempt to use
	transient-for or set window as modal, just make it
	WINDOW_TYPE_DIALOG.  Put window contents inside a frame.  Centre
	label in Y axis.  Remove unnecessary calls to gtk_widget_show.

2003-01-02  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.34 released.
	* gpe-session-scripts 0.31 released.

2003-01-02  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-login1: Provide gpe-session-starter.
	* familiar/control.gpe-session-scripts: Depend on
	gpe-session-starter not gpe-login directly.

	* X11/Xinit.d/99gpe-login: Move to ...
	* gpe-login.xinit: ... here.
	* Makefile (install-login): Install it.

2003-01-02  Philip Blundell  <philb@gnu.org>

	* X11/Xinit.d/90xXkbd: Delete, contents moved to ...
	* X11/Xinit.d/99gpe-login: ... here.
	* X11/Xsession-gpe.d/90xXkbd: Delete.

2003-01-01  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.33 released.
	* gpe-session-scripts 0.30 released.
	
2003-01-01  Philip Blundell  <philb@gnu.org>

	* gpe-login.c: Remove spurious include of gdk_imlib.h.

	* familiar/postinst.gpe-login, familiar/postrm.gpe-login: New.
	* Makefile (install-scripts): Don't install gpe-login.setup,
	gpe-login.keylaunchrc, gpe-login.suspend, gpe-login.session.
	(install-login): Install them here instead.  Also ship
	gpe-login.gtkrc and /etc/X11/Xsession{-gpe}.d10unsetgtkrc.
	(ipkg): Add postinst and postrm scripts to gpe-login.

	* X11/Xinit.d/20xBacklight: Delete.

	* X11/gpe-login.gtkrc: New.
	* X11/Xinit.d/99gpe-login: Set GTK2_RC_FILES.
	* X11/Xsession.d/10unsetgtkrc: New.

	* X11/Xsession-gpe.d/25dotfiles: Use new pixmap for xkbd.  Add
	minitheme, minilite, gpe-what.

	* Makefile (LDFLAGS): Remove -lrootimage.
	(LDFLAGS_ROOT): New.  Put it here instead.
	(gpe-login): Use $(LDFLAGS_ROOT) also.

2002-12-24  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.32 released.

2002-12-24  Philip Blundell  <philb@gnu.org>

	* gpe-logout.c (main): Request no window decorations.  Swap
	buttons over so "yes" is on the left.  Use gpe-logout icon rather
	than generic question.

2002-12-17  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.29 released.

2002-12-17  Philip Blundell  <philb@gnu.org>

	* gpe-login.setup: Use /usr/share/pixmaps/gpe-default-bg.png as
	background pixmap.

2002-12-11  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.31 released.
	
	* gpe-session-scripts 0.28 released.

2002-12-11  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Set line wrap on for recalibration hint.

	* X11/Xsession-gpe.d/20xBacklight: Deleted.

2002-12-08  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.30-1 released.
	
	* gpe-session-scripts 0.27-1 released.
	
2002-12-08  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-session-scripts (Depends): Add apmd.
	* familiar/control.gpe-login1 (Depends): Add librootimage0.
	* familiar/control.gpe-login (Depends): Likewise.

2002-12-08  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.30 released.
	
	* gpe-dm 0.18 released.
	
	* gpe-session-scripts 0.27 released.

2002-12-07  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (filter): Spawn xkbd here.  Create a new socket and
	pack it into the box.
	(main): In autolock mode, don't create a socket or spawn xkbd.
	Just make an event box to hold the socket.
	(enter_lock_callback): Kill xkbd.
	(spawn_xkbd, parse_xkbd_args): Move higher in file.

2002-12-01  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c (main): Call openlog.  Replace fork with vfork.
	(start_server): Replace fork with vfork.  Replace fprintf with syslog.

	* familiar/control.gpe-session-scripts (Depends): Add gpe-question.

	* X11/Xsession-gpe.d/90GpeAppMgr: Deleted.
	* X11/Xsession-gpe.d/55xScreenSaver: Likewise.

2002-11-74  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.26 released.

2002-11-27  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/25dotfiles: Launch xkbd, not gpe-kbd.

2002-11-24  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.25 released.

2002-11-24  Philip Blundell  <philb@gnu.org>

	* gpe-login.keylaunchrc (key): Add entry for held power button.

2002-11-23  Philip Blundell  <philb@gnu.org>

	* X11/Xinit.d/30xTs_Calibrate: If /etc/xcalibrate.conf is missing,
	run xcalibrate to generate it.

2002-11-17  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.24 released.

2002-11-17  Philip Blundell  <philb@gnu.org>

	* gpe-login.keylaunchrc: Add missing field.

2002-11-15  Philip Blundell  <philb@gnu.org>

	* gpe-dm 0.17 released.
	* gpe-session-scripts 0.23 released.

2002-11-15  Philip Blundell  <philb@gnu.org>

	* gpe-login.setup (PATH): Set suspend button to soft mode.
	* gpe-login.keylaunchrc: Add suspend button handling.
	
	* X11/Xserver: Tweak iPAQ model handling.  Add support for H3900.

2002-10-25  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c: Don't open connection to X server.

	* Makefile (CFLAGS): Search ../librootimage for headers.
	(gpe-login): Remove rootpixmap.o
	* gpe-login.c (mapped): Add extra arg to rootimage functions.
	* rootpixmap.c: Deleted.
	* rootpixmap.h: Deleted also.

2002-10-22  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.29 released.

2002-10-22  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Call initgroups.

2002-10-16  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.28 released.

2002-10-16  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Fix busted config file handling.
	(GPE_LOGIN_CONF): Move to /etc/gpe/gpe-login.conf.

2002-10-16  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.27 released.
	* gpe-session-scripts 0.22 released.

2002-10-15  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/10setroot: Deleted.

	* gpe-login.c (main): Add support for /etc/gpe-login.conf.

2002-10-12  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.21 released.

2002-10-12  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/25dotfiles: Launch the apps rather than
	fiddling with .mbdock.  Run mbmenu as well as mmenu.

	* gpe-login.c (keymap): Add NESW keys.
	(parse_xkbd_args): New function.
	(spawn_xkbd): Use it.
	(hard_key_insert): Support autolock mode.
	(mapped): Remove stray debug.
	(main): Support --xkbd flag.  Suppress warnings.

	* rootpixmap.h: New file.
	* main.c, rootpixmap.c: Include it.

	* Makefile (GTK2): Default is yes.

2002-10-11  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (login_correct): First argument is a string, not a
	widget.
	(enter_lock_callback): Update call to above.
	(enter_callback): Likewise.
	(hard_key_insert, key_press_event, mapped): New functions.
	(main): Support --hard-keys. 

	* X11/Xinit.d/99gpe-login (HARD): Add commented out definition.

	* rootpixmap.c: New file.
	* Makefile (gpe-login): Build it.
	* gpe-login.c (main): Avoid use of ParentRelative for transparency.

2002-10-08  Philip Blundell  <philb@gnu.org>

	* gpe-login, gpe-login2 0.24 released.
	
2002-10-08  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (login_correct): Avoid abuse of gtk_entry_get_chars.

2002-10-08  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.20-1 released.

2002-10-08  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-session-scripts (Depends): Remove
	versioning on gpe-login.

2002-10-08  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.20 released.
	* gpe-login, gpe-login2 0.23 released.

2002-10-08  Philip Blundell  <philb@gnu.org>

	* familiar/control.session-scripts (Suggest): Add gpe-setbg.
	(Depends): Remove gpe-appmgr, gpe-dm.  Add keylaunch, ipaq-sleep.
	* familiar/control.gpe-login (Suggests): Remove gpe-setbg.
	(Depends): Remove keylaunch, ipaq-sleep.
	* familiar/control.gpe-login1: New file.
	* Makefile (ipkg): Use it for gpe-login2 package.

2002-10-07  Philip Blundell  <philb@gnu.org>

	* X11/Xsession.gpe-d/65xstroke: Deleted.

2002-10-06  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (enter_newuser_callback): Add "const" qualifiers.
	(login_correct): Likewise.

	* nocursor.c: Support GTK 2.

2002-09-24  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.setup: Fallback to color should be working now, even
	though it's ugly.

2002-09-22  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.setup: Check for /etc/gpe/gpe-login-bg.dontshow and
	/etc/gpe/gpe-ownerinfo.dontshow files
	* familiar/control.gpe-login (Suggests): Suggest gpe-setbg.

	* gpe-login.setup: Try to set background image with gpe-setbg.

2002-09-11  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-xcalibrate.sh: Add comment on the fixed xcalibrate, but
	don't evaluate the return code yet (not until ipkg supports
	versioned dependencies).

	* familiar/control.gpe-session-scripts (Depends): Versioned
	dependency on xcalibrate (>= 0.2-2).

2002-09-09  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-logout.c (main): Don't set window title, in accordance to
	the Gnome HIG (see pg. 22 of HIG 1.0).
	(main): Set the border width for the hbox.
	(main): Use a Gnome stock icon (question.png).
	(main): Wrap log out text so that even user with a huge font see
	all of it.
	(main): Align label and icon so that it conforms to the Gnome 2
	HIG (icon aligned on top, text aligned left), see pg. 22 of HIG
	1.0.
	(main): Fix box packing more (expand/shrink flags). Let the label
	wrap if necessary.

2002-09-05  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.22 released.

2002-09-05  Philip Blundell  <philb@gnu.org>

	* Makefile (gpe-login): Use $^ not $<.
	(gpe-logout): Likewise.
	(gpe-dm): Likewise.
	(gpe-lock-display): Likewise.
	(clean): Remove nocursor.o too.
	
2002-09-05  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.18 released.
	
2002-09-05  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-session-scripts (Depends): Add xcalibrate.

2002-09-05  Colin Marquardt  <colin@marquardt-home.de>

	* X11/Xinit.d/99gpe-login (TRANSPARENT): Only use transparency if
	xsetroot is there and executable.

	* gpe-login.setup: Check if files are executable, not just existant.

	* X11/Xinit.d/99gpe-login: Run gpe-login with the --transparent
	option.
	(GEOMETRY): Remove --no-logo option.

	* gpe-login.setup: Call xsetroot, run gpe-ownerinfo with the -t
	option (transparent).

	* gpe-login.c (main): Remove gtk_set_locale() call.

2002-09-04  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.21 released.
	
2002-09-04  Philip Blundell  <philb@gnu.org>

	* gpe-login.c: Remove support for logo.  Add new option
	"--transparent".

2002-09-03  Colin Marquardt  <colin@marquardt-home.de>

	* Makefile (gpe-login): Depend on nocursor.

	* nocursor.c: New file.

	* gpe-login.c, gpe-logout.c: Use <gpe/foo.h> for the includes now.

2002-08-07  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.17 released.

2002-08-07  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/60xXDefaults: Just merge the resources from
	~/.Xdefaults, don't overwrite the existing database.

2002-08-06  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.20 released.
	* gpe-session-scripts 0.16 released.

2002-08-06  Philip Blundell  <philb@gnu.org>

	* gpe-logout.c (main): Shorten window title.

	* gpe-login.c (main): Don't grab focus when not in autolock mode.

2002-08-06  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-xcalibrate.sh: Don't look at xcalibrate's return code, as it
	always returns 1 (at least in the version we have in unstable
	right now).

2002-08-05  Moray Allan  <moray@handhelds.org>

	* gpe-login/familiar/gpe-logout.menu: Moved to section 'Utilities'.

2002-08-04  Moray Allan  <moray@handhelds.org>

	* X11/Xsession-gpe.d/25dotfiles: New file.

2002-08-04  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c: Remove unused variable.

	* Makefile (CFLAGS, LDFLAGS): Support GTK 2.

2002-08-03  Moray Allan  <moray@handhelds.org>

	* gpe-logout.c, gpe-logout.menu: Added confirmation dialog.
	* gpe-login.pre-session, Xsession: tmpfs symlink now '~/ramdisk'.

2002-07-30  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.19 released.
	* gpe-session-scripts 0.15 released.

2002-07-30  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-session-scripts (Depends): Add gpe-dm.
	Require gpe-login 0.19 or newer.

	* X11/Xinit.d/99gpe-login: Set smaller geometry and suppress logo
	if gpe-ownerinfo is found.
	* X11/Xinit.d/90xXkbd: Ensure /usr/X11R6/bin is in $PATH.
	* gpe-login.setup: Remove call to xmodmap.  Ensure /usr/bin is in
	$PATH.
	* gpe-login.c: Add --no-logo option.  Accept -g as alias for
	--geometry.
	* gpe-login.setup: Run gpe-ownerinfo if it exists.

	* Makefile: Move gpe-login.setup, gpe-login.keylaunchrc,
	gpe-login.suspend, gpe-login.session, gpe-xcalibrate.sh from
	gpe-login to gpe-session-scripts.
	
2002-07-30  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.18 released.
	* gpe-session-scripts 0.14 released.
	* gpe-dm 0.16 released.

2002-07-30  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Accept --geometry on command line.  Don't
	explain about calibration in autolock mode.

	* X11/Xinit.d/99gpe-login: New file.

	* gpe-dm.c (main): Don't start gpe-login directly, assume Xinit
	will do that.

	* familiar/control.gpe-login: Depend on xkbd, don't just suggest
	it.  Remove suggestion of gpe-session-scripts.
	* familiar/control.gpe-dm (Depends): Demand gpe-session-scripts
	0.14 or newer.  Remove gpe-login.
	* familiar/control.gpe-session-scripts: Depend on gpe-login 0.18
	or newer.

2002-07-30  Colin Marquardt  <colin@marquardt-home.de>

	* Makefile (ipkg): mkdir
	familiar/dist.gpe-session-scripts/usr/share/pixmaps.

2002-07-30  Moray Allan  <moray@handhelds.org>

        * X11/Xsession: Now sets HOME_VOLATILE environment variable to
        location of ramdisk portion of user's home direcory.
        * X11/gpe-login.pre-session: Added comment about HOME_VOLATILE.

2002-07-30  Colin Marquardt  <colin@marquardt-home.de>

	* familiar/gpe-logout.png (Module): New icon.

	* Makefile (ipkg): Copy icon.

	* familiar/gpe-logout.menu: Added an icon.

2002-07-29  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (filter): Set window dimensions.  Grab keyboard into
	widget with focus.
	(main): Don't set window size if in autolock mode.  Add text
	explaining about xcalibrate.  Grab keyboard into widget with focus.

2002-07-29  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.c (main): Add some padding/alignment/justification
	stuff, remove explicit width settings from username option and
	password entry field. Let's hope it does look better on the iPAQ;
	it certainly does in Xnest where I have bigger fonts.
 
2002-07-27  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-xcalibrate.sh: New file. Runs xcalibrate and writes the
	config file.

	Make it only write the configuration when xcalibrated returned
	successfully.

	* Makefile (install-login): Install gpe-xcalibrate.sh.

	* gpe-login.keylaunchrc: Call wrapper script that also saves the
	xcalibrate configuration.

2002-07-25  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Correct geometry parsing.

2002-07-23  Philip Blundell  <philb@gnu.org>

	* gpe-login.setup: Call ipaq-sleep with -n flag so we can kill it later.

2002-07-23  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.17 released.
	* gpe-session-scripts 0.13 released.

2002-07-22  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-login (Depends): Add keylaunch, ipaq-sleep.
	* gpe-login.setup: Add call to ipaq-sleep.
	* gpe-login.keylaunchrc: Use full pathname for xcalibrate.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Move "OK" button next to password field.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.16.1 released.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Open .xsession-errors with correct mode.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.16 released.
	* gpe-dm 0.15 released.
	* gpe-session-scripts 0.12 released.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: Symlink .xsession-errors into
	ramdisk.
	
	* gpe-login.c (do_login): Redirect output from session to
	.xsession-errors file.  Call setgid before setuid.
	(pre_session): Call perror if exec fails.

	* gpe-login.setup (PATH): Include /usr/X11R6/bin.

	* gpe-dm.c (main): Don't create dummy window.  Remove useless
	sleep.  If -n option was given, don't call daemon().
	(start_server): Pass -noreset to server.

	* gpe-login.c (main): Use /etc/X11/gpe-login.geometry if it exists.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: Create home directory in RAM disk.

	* gpe-login.setup: Add keylaunch invocation.
	* gpe-login.keylaunchrc: New file.
	* Makefile (install-login): Install it.

	* X11/Xsession-gpe.d/10setroot: New file.

	* gpe-login.c (filter): Clear "result" label in case of previous
	failed login attempt.
	(Makefile): Remove spare "all" target.

2002-07-20  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.c (main): Add default and user resource files.
	(enter_lock_callback): Use gpe_login_incorrect style.
	(enter_callback):  Use gpe_login_incorrect style.
	(main): Use gpe_application_init, remove own gtkrc setup stuff.
	(main): Move setting of gpe_login_incorrect style to here.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* Makefile (install-dm): Use -f when making symbolic link.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* gpe-login.c: (read_key_events): Delete.
	(do_login): Set USER too.
	(login_correct): New function, broken out from enter_callback.
	(enter_lock_callback): New function.
	(filter): Likewise.
	(key_pressed): Delete.
	(spawn_xkbd): New function, broken out from main.
	(main): Add autolock mode; remove button handling.  Set override
	redirect when going fullscreen.

	* gpe-lock-display.c: New file.
	* gpe-login.session, gpe-login.suspend: New files.
	* Makefile (install-login): Install these new files.

	* gpe-login 0.14 released.

2002-07-19  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c (main): Clear the environment.

	* gpe-dm 0.15 released.

2002-07-19  Philip Blundell  <philb@gnu.org>

	* familiar/gpe-logout.menu: New file.
	* X11/gpe-login.pre-session: Likewise.
	* Makefile (install-scripts): Ship them.

	* X11/Xsession-gpe.d/65xMenu: Deleted.

	* familiar/control.gpe-session-scripts: Remove dependency on xkbd.

	* gpe-session-scripts 0.11.4 released.

2002-07-18  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: New file.
	* Makefile (install-scripts): Install it.

	* X11/Xsession-gpe.d/70unclutter: Deleted.

	* gpe-session-scripts 0.11 released.

2002-07-17  Philip Blundell  <philb@gnu.org>

	* Makefile (install-dm): Install initscript too.
	* familiar/control.gpe-dm: Provide x-display-manager; depend on
	xserver not xserver-tiny-h3600.
	* gpe-dm.init: New file.
	* 99GpeLogin: Deleted.

	* gpe-dm 0.13-3 released.

2002-06-22  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): New argument `shell'.  Set $SHELL to this.
	(enter_callback): Pass shell to do_login.
	(enter_newuser_callback): Likewise.

	* gpe-login 0.14 released.

	* Makefile (gpe-dm): Link with -lX11.
	* gpe-dm.c (main): Create a private window to stop the server
	resetting after Xinit.

	* gpe-dm 0.12 released.
	
2002-06-21  Philip Blundell  <pb@debian.org>

	* gpe-login 0.13 released.

2002-06-20  Philip Blundell  <pb@debian.org>

	* familiar/control.gpe-login (Version): Set to 0.12.
	(Depends): Require libgpewidget0 >= 0.07.

	* gpe-login.c (main): Handle errors from fork.  Pass username to
	do_login.  Call perror when execl of xkbd fails.
	(add_one_user): New function, split out from slurp_passwd.
	(slurp_passwd): Add root to the menu.
	(pre_session): New function.
	(do_login): Call it.

2002-06-19  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (read_key_events): New function.
	(key_pressed): Likewise.
	(main): Handle key-pressed events.  Ignore SIGCHLD.

	* familiar/control.gpe-login: Set version to 0.11.
	* familiar/control.gpe-dm: Likewise.

	* gpe-login-setup: Rename to ...
	* gpe-login.setup: ... this.
	* gpe-login.buttons: New file.
	* Makefile (install): Put above in /etc/X11.
	(clean): Remove gpe-dm too.

2002-06-19  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Become session leader.

	* gpe-dm.c (shutdown): New function.
	(main): Dissociate from controlling tty.  Try to kill session and
	Xserver on SIGTERM or SIGINT.

2002-06-17  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): If no window manager is running, set window
	size to full-screen.
	(Makefile): Create separate packages for gpe-dm and
	gpe-session-scripts.
	(X11): New directory.

2002-06-17  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c: New file.
	* Makefile (gpe-dm): New target.
	(all): Include it.

	* gpe-login.c (do_login): Remove useless fork.
	

