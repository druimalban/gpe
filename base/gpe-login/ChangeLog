2002-09-04  Philip Blundell  <philb@gnu.org>

	* gpe-login.c: Remove support for logo.  Add new option
	"--transparent".

2002-09-03  Colin Marquardt  <colin@marquardt-home.de>

	* Makefile (gpe-login): Depend on nocursor.

	* nocursor.c: New file.

	* gpe-login.c, gpe-logout.c: Use <gpe/foo.h> for the includes now.

2002-08-07  Philip Blundell  <philb@gnu.org>

	* gpe-session-scripts 0.17 released.

2002-08-07  Philip Blundell  <philb@gnu.org>

	* X11/Xsession-gpe.d/60xXDefaults: Just merge the resources from
	~/.Xdefaults, don't overwrite the existing database.

2002-08-06  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.20 released.
	* gpe-session-scripts 0.16 released.

2002-08-06  Philip Blundell  <philb@gnu.org>

	* gpe-logout.c (main): Shorten window title.

	* gpe-login.c (main): Don't grab focus when not in autolock mode.

2002-08-06  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-xcalibrate.sh: Don't look at xcalibrate's return code, as it
	always returns 1 (at least in the version we have in unstable
	right now).

2002-08-05  Moray Allan  <moray@handhelds.org>

	* gpe-login/familiar/gpe-logout.menu: Moved to section 'Utilities'.

2002-08-04  Moray Allan  <moray@handhelds.org>

	* X11/Xsession-gpe.d/25dotfiles: New file.

2002-08-04  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c: Remove unused variable.

	* Makefile (CFLAGS, LDFLAGS): Support GTK 2.

2002-08-03  Moray Allan  <moray@handhelds.org>

	* gpe-logout.c, gpe-logout.menu: Added confirmation dialog.
	* gpe-login.pre-session, Xsession: tmpfs symlink now '~/ramdisk'.

2002-07-30  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.19 released.
	* gpe-session-scripts 0.15 released.

2002-07-30  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-session-scripts (Depends): Add gpe-dm.
	Require gpe-login 0.19 or newer.

	* X11/Xinit.d/99gpe-login: Set smaller geometry and suppress logo
	if gpe-ownerinfo is found.
	* X11/Xinit.d/90xXkbd: Ensure /usr/X11R6/bin is in $PATH.
	* gpe-login.setup: Remove call to xmodmap.  Ensure /usr/bin is in
	$PATH.
	* gpe-login.c: Add --no-logo option.  Accept -g as alias for
	--geometry.
	* gpe-login.setup: Run gpe-ownerinfo if it exists.

	* Makefile: Move gpe-login.setup, gpe-login.keylaunchrc,
	gpe-login.suspend, gpe-login.session, gpe-xcalibrate.sh from
	gpe-login to gpe-session-scripts.
	
2002-07-30  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.18 released.
	* gpe-session-scripts 0.14 released.
	* gpe-dm 0.16 released.

2002-07-30  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Accept --geometry on command line.  Don't
	explain about calibration in autolock mode.

	* X11/Xinit.d/99gpe-login: New file.

	* gpe-dm.c (main): Don't start gpe-login directly, assume Xinit
	will do that.

	* familiar/control.gpe-login: Depend on xkbd, don't just suggest
	it.  Remove suggestion of gpe-session-scripts.
	* familiar/control.gpe-dm (Depends): Demand gpe-session-scripts
	0.14 or newer.  Remove gpe-login.
	* familiar/control.gpe-session-scripts: Depend on gpe-login 0.18
	or newer.

2002-07-30  Colin Marquardt  <colin@marquardt-home.de>

	* Makefile (ipkg): mkdir
	familiar/dist.gpe-session-scripts/usr/share/pixmaps.

2002-07-30  Moray Allan  <moray@handhelds.org>

        * X11/Xsession: Now sets HOME_VOLATILE environment variable to
        location of ramdisk portion of user's home direcory.
        * X11/gpe-login.pre-session: Added comment about HOME_VOLATILE.

2002-07-30  Colin Marquardt  <colin@marquardt-home.de>

	* familiar/gpe-logout.png (Module): New icon.

	* Makefile (ipkg): Copy icon.

	* familiar/gpe-logout.menu: Added an icon.

2002-07-29  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (filter): Set window dimensions.  Grab keyboard into
	widget with focus.
	(main): Don't set window size if in autolock mode.  Add text
	explaining about xcalibrate.  Grab keyboard into widget with focus.

2002-07-29  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.c (main): Add some padding/alignment/justification
	stuff, remove explicit width settings from username option and
	password entry field. Let's hope it does look better on the iPAQ;
	it certainly does in Xnest where I have bigger fonts.
 
2002-07-27  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-xcalibrate.sh: New file. Runs xcalibrate and writes the
	config file.

	Make it only write the configuration when xcalibrated returned
	successfully.

	* Makefile (install-login): Install gpe-xcalibrate.sh.

	* gpe-login.keylaunchrc: Call wrapper script that also saves the
	xcalibrate configuration.

2002-07-25  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Correct geometry parsing.

2002-07-23  Philip Blundell  <philb@gnu.org>

	* gpe-login.setup: Call ipaq-sleep with -n flag so we can kill it later.

2002-07-23  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.17 released.
	* gpe-session-scripts 0.13 released.

2002-07-22  Philip Blundell  <philb@gnu.org>

	* familiar/control.gpe-login (Depends): Add keylaunch, ipaq-sleep.
	* gpe-login.setup: Add call to ipaq-sleep.
	* gpe-login.keylaunchrc: Use full pathname for xcalibrate.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Move "OK" button next to password field.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.16.1 released.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Open .xsession-errors with correct mode.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.16 released.
	* gpe-dm 0.15 released.
	* gpe-session-scripts 0.12 released.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: Symlink .xsession-errors into
	ramdisk.
	
	* gpe-login.c (do_login): Redirect output from session to
	.xsession-errors file.  Call setgid before setuid.
	(pre_session): Call perror if exec fails.

	* gpe-login.setup (PATH): Include /usr/X11R6/bin.

	* gpe-dm.c (main): Don't create dummy window.  Remove useless
	sleep.  If -n option was given, don't call daemon().
	(start_server): Pass -noreset to server.

	* gpe-login.c (main): Use /etc/X11/gpe-login.geometry if it exists.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: Create home directory in RAM disk.

	* gpe-login.setup: Add keylaunch invocation.
	* gpe-login.keylaunchrc: New file.
	* Makefile (install-login): Install it.

	* X11/Xsession-gpe.d/10setroot: New file.

	* gpe-login.c (filter): Clear "result" label in case of previous
	failed login attempt.
	(Makefile): Remove spare "all" target.

2002-07-20  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.c (main): Add default and user resource files.
	(enter_lock_callback): Use gpe_login_incorrect style.
	(enter_callback):  Use gpe_login_incorrect style.
	(main): Use gpe_application_init, remove own gtkrc setup stuff.
	(main): Move setting of gpe_login_incorrect style to here.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* Makefile (install-dm): Use -f when making symbolic link.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* gpe-login.c: (read_key_events): Delete.
	(do_login): Set USER too.
	(login_correct): New function, broken out from enter_callback.
	(enter_lock_callback): New function.
	(filter): Likewise.
	(key_pressed): Delete.
	(spawn_xkbd): New function, broken out from main.
	(main): Add autolock mode; remove button handling.  Set override
	redirect when going fullscreen.

	* gpe-lock-display.c: New file.
	* gpe-login.session, gpe-login.suspend: New files.
	* Makefile (install-login): Install these new files.

	* gpe-login 0.14 released.

2002-07-19  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c (main): Clear the environment.

	* gpe-dm 0.15 released.

2002-07-19  Philip Blundell  <philb@gnu.org>

	* familiar/gpe-logout.menu: New file.
	* X11/gpe-login.pre-session: Likewise.
	* Makefile (install-scripts): Ship them.

	* X11/Xsession-gpe.d/65xMenu: Deleted.

	* familiar/control.gpe-session-scripts: Remove dependency on xkbd.

	* gpe-session-scripts 0.11.4 released.

2002-07-18  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: New file.
	* Makefile (install-scripts): Install it.

	* X11/Xsession-gpe.d/70unclutter: Deleted.

	* gpe-session-scripts 0.11 released.

2002-07-17  Philip Blundell  <philb@gnu.org>

	* Makefile (install-dm): Install initscript too.
	* familiar/control.gpe-dm: Provide x-display-manager; depend on
	xserver not xserver-tiny-h3600.
	* gpe-dm.init: New file.
	* 99GpeLogin: Deleted.

	* gpe-dm 0.13-3 released.

2002-06-22  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): New argument `shell'.  Set $SHELL to this.
	(enter_callback): Pass shell to do_login.
	(enter_newuser_callback): Likewise.

	* gpe-login 0.14 released.

	* Makefile (gpe-dm): Link with -lX11.
	* gpe-dm.c (main): Create a private window to stop the server
	resetting after Xinit.

	* gpe-dm 0.12 released.
	
2002-06-21  Philip Blundell  <pb@debian.org>

	* gpe-login 0.13 released.

2002-06-20  Philip Blundell  <pb@debian.org>

	* familiar/control.gpe-login (Version): Set to 0.12.
	(Depends): Require libgpewidget0 >= 0.07.

	* gpe-login.c (main): Handle errors from fork.  Pass username to
	do_login.  Call perror when execl of xkbd fails.
	(add_one_user): New function, split out from slurp_passwd.
	(slurp_passwd): Add root to the menu.
	(pre_session): New function.
	(do_login): Call it.

2002-06-19  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (read_key_events): New function.
	(key_pressed): Likewise.
	(main): Handle key-pressed events.  Ignore SIGCHLD.

	* familiar/control.gpe-login: Set version to 0.11.
	* familiar/control.gpe-dm: Likewise.

	* gpe-login-setup: Rename to ...
	* gpe-login.setup: ... this.
	* gpe-login.buttons: New file.
	* Makefile (install): Put above in /etc/X11.
	(clean): Remove gpe-dm too.

2002-06-19  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Become session leader.

	* gpe-dm.c (shutdown): New function.
	(main): Dissociate from controlling tty.  Try to kill session and
	Xserver on SIGTERM or SIGINT.

2002-06-17  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): If no window manager is running, set window
	size to full-screen.
	(Makefile): Create separate packages for gpe-dm and
	gpe-session-scripts.
	(X11): New directory.

2002-06-17  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c: New file.
	* Makefile (gpe-dm): New target.
	(all): Include it.

	* gpe-login.c (do_login): Remove useless fork.
	

