2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): Move "OK" button next to password field.

	* gpe-login 0.16.1 released.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Open .xsession-errors with correct mode.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* gpe-login 0.16 released.
	* gpe-dm 0.15 released.
	* gpe-session-scripts 0.12 released.

2002-07-21  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: Symlink .xsession-errors into
	ramdisk.
	
	* gpe-login.c (do_login): Redirect output from session to
	.xsession-errors file.  Call setgid before setuid.
	(pre_session): Call perror if exec fails.

	* gpe-login.setup (PATH): Include /usr/X11R6/bin.

	* gpe-dm.c (main): Don't create dummy window.  Remove useless
	sleep.  If -n option was given, don't call daemon().
	(start_server): Pass -noreset to server.

	* gpe-login.c (main): Use /etc/X11/gpe-login.geometry if it exists.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: Create home directory in RAM disk.

	* gpe-login.setup: Add keylaunch invocation.
	* gpe-login.keylaunchrc: New file.
	* Makefile (install-login): Install it.

	* X11/Xsession-gpe.d/10setroot: New file.

	* gpe-login.c (filter): Clear "result" label in case of previous
	failed login attempt.
	(Makefile): Remove spare "all" target.

2002-07-20  Colin Marquardt  <colin@marquardt-home.de>

	* gpe-login.c (main): Add default and user resource files.
	(enter_lock_callback): Use gpe_login_incorrect style.
	(enter_callback):  Use gpe_login_incorrect style.
	(main): Use gpe_application_init, remove own gtkrc setup stuff.
	(main): Move setting of gpe_login_incorrect style to here.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* Makefile (install-dm): Use -f when making symbolic link.

2002-07-20  Philip Blundell  <philb@gnu.org>

	* gpe-login.c: (read_key_events): Delete.
	(do_login): Set USER too.
	(login_correct): New function, broken out from enter_callback.
	(enter_lock_callback): New function.
	(filter): Likewise.
	(key_pressed): Delete.
	(spawn_xkbd): New function, broken out from main.
	(main): Add autolock mode; remove button handling.  Set override
	redirect when going fullscreen.

	* gpe-lock-display.c: New file.
	* gpe-login.session, gpe-login.suspend: New files.
	* Makefile (install-login): Install these new files.

	* gpe-login 0.14 released.

2002-07-19  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c (main): Clear the environment.

	* gpe-dm 0.15 released.

2002-07-19  Philip Blundell  <philb@gnu.org>

	* familiar/gpe-logout.menu: New file.
	* X11/gpe-login.pre-session: Likewise.
	* Makefile (install-scripts): Ship them.

	* X11/Xsession-gpe.d/65xMenu: Deleted.

	* familiar/control.gpe-session-scripts: Remove dependency on xkbd.

	* gpe-session-scripts 0.11.4 released.

2002-07-18  Philip Blundell  <philb@gnu.org>

	* X11/gpe-login.pre-session: New file.
	* Makefile (install-scripts): Install it.

	* X11/Xsession-gpe.d/70unclutter: Deleted.

	* gpe-session-scripts 0.11 released.

2002-07-17  Philip Blundell  <philb@gnu.org>

	* Makefile (install-dm): Install initscript too.
	* familiar/control.gpe-dm: Provide x-display-manager; depend on
	xserver not xserver-tiny-h3600.
	* gpe-dm.init: New file.
	* 99GpeLogin: Deleted.

	* gpe-dm 0.13-3 released.

2002-06-22  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): New argument `shell'.  Set $SHELL to this.
	(enter_callback): Pass shell to do_login.
	(enter_newuser_callback): Likewise.

	* gpe-login 0.14 released.

	* Makefile (gpe-dm): Link with -lX11.
	* gpe-dm.c (main): Create a private window to stop the server
	resetting after Xinit.

	* gpe-dm 0.12 released.
	
2002-06-21  Philip Blundell  <pb@debian.org>

	* gpe-login 0.13 released.

2002-06-20  Philip Blundell  <pb@debian.org>

	* familiar/control.gpe-login (Version): Set to 0.12.
	(Depends): Require libgpewidget0 >= 0.07.

	* gpe-login.c (main): Handle errors from fork.  Pass username to
	do_login.  Call perror when execl of xkbd fails.
	(add_one_user): New function, split out from slurp_passwd.
	(slurp_passwd): Add root to the menu.
	(pre_session): New function.
	(do_login): Call it.

2002-06-19  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (read_key_events): New function.
	(key_pressed): Likewise.
	(main): Handle key-pressed events.  Ignore SIGCHLD.

	* familiar/control.gpe-login: Set version to 0.11.
	* familiar/control.gpe-dm: Likewise.

	* gpe-login-setup: Rename to ...
	* gpe-login.setup: ... this.
	* gpe-login.buttons: New file.
	* Makefile (install): Put above in /etc/X11.
	(clean): Remove gpe-dm too.

2002-06-19  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (do_login): Become session leader.

	* gpe-dm.c (shutdown): New function.
	(main): Dissociate from controlling tty.  Try to kill session and
	Xserver on SIGTERM or SIGINT.

2002-06-17  Philip Blundell  <philb@gnu.org>

	* gpe-login.c (main): If no window manager is running, set window
	size to full-screen.
	(Makefile): Create separate packages for gpe-dm and
	gpe-session-scripts.
	(X11): New directory.

2002-06-17  Philip Blundell  <philb@gnu.org>

	* gpe-dm.c: New file.
	* Makefile (gpe-dm): New target.
	(all): Include it.

	* gpe-login.c (do_login): Remove useless fork.
	

